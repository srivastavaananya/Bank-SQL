create DATABASE BMS_DB1;
use BMS_DB1;

-- drop table CUSTOMER_PERSONAL_INFO;
-- CUSTOMER_PERSONAL_INFO
create table CUSTOMER_PERSONAL_INFO
(
CUSTOMER_ID VARCHAR(5),
CUSTOMER_NAME VARCHAR(30),
DATE_OF_BIRTH DATE,
GUARDIAN_NAME VARCHAR(30),
ADDRESS VARCHAR(50),
CONTACT_NUMBER INT,
MAIL_ID VARCHAR(30),
GENDER CHAR(1),
MARITAL_STATUS VARCHAR(10),
IDENTIFICATION_DOC_TYPE VARCHAR(20),
ID_DOC_NO VARCHAR(20),
CITIZENSHIP VARCHAR(10),
CONSTRAINT CUST_PERS_INFO_PK PRIMARY KEY(CUSTOMER_ID)
);
ALTER TABLE customer_personal_info MODIFY column CONTACT_NUMBER BIGINT UNSIGNED;
DESC CUSTOMER_PERSONAL_INFO;

-- drop table CUSTOMER_REFERENCE_INFO;
 -- CUSTOMER_REFERENCE_INFO
create table CUSTOMER_REFERENCE_INFO
(
CUSTOMER_ID VARCHAR(5),
REFERENCE_ACC_NAME VARCHAR(20),
REFERENCE_ACC_NUMBER INT,
REFERENCE_ACC_ADDRESS VARCHAR(50),
RELATION VARCHAR(25),
CONSTRAINT CUST_REF_INFO_PK PRIMARY KEY(CUSTOMER_ID),
CONSTRAINT CUST_REF_INFO_FK FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER_PERSONAL_INFO(CUSTOMER_ID)
);
ALTER TABLE customer_reference_info MODIFY column REFERENCE_ACC_NUMBER BIGINT UNSIGNED;
DESC CUSTOMER_REFERENCE_INFO;

-- BANK INFO
create table BANK_INFO
(
IFSC_CODE VARCHAR(15),
BANK_NAME VARCHAR(25),
BRANCH_NAME VARCHAR(25),
CONSTRAINT BANK_INFO_PK PRIMARY KEY(IFSC_CODE)
);
DESC BANK_INFO;

-- ACCOUNT INFO
create table ACCOUNT_INFO
(
ACCOUNT_NUMBER INT,
CUSTOMER_ID VARCHAR(5),
ACCOUNT_TYPE VARCHAR(10),
REGISTERATION_DATE DATE,
ACTIVATION_DATE DATE,
IFSC_CODE VARCHAR(10),
INTEREST DECIMAL(7,2),
INITIAL_DEPOSIT INT,
CONSTRAINT ACC_INFO_PK PRIMARY KEY(ACCOUNT_NUMBER),
CONSTRAINT ACC_INFO_PERS_FK FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER_PERSONAL_INFO(CUSTOMER_ID),
CONSTRAINT ACC_INFO_BANK_FK FOREIGN KEY(IFSC_CODE) REFERENCES BANK_INFO(IFSC_CODE)
);
ALTER TABLE ACCOUNT_INFO MODIFY column ACCOUNT_NUMBER BIGINT UNSIGNED;
DESC ACCOUNT_INFO;

-- BANK_INFO
INSERT INTO BANK_INFO(IFSC_CODE, BANK_NAME, BRANCH_NAME)VALUES('HDVL0012','HDFC','VALASARAVAKKAM');
INSERT INTO BANK_INFO(IFSC_CODE, BANK_NAME, BRANCH_NAME)VALUES('SBITN0123', 'SBI', 'TNAGAR');
INSERT INTO BANK_INFO(IFSC_CODE, BANK_NAME, BRANCH_NAME)VALUES('ICITN0232', 'ICICI','TNAGAR');
INSERT INTO BANK_INFO(IFSC_CODE, BANK_NAME, BRANCH_NAME)VALUES('ICIPG0242', 'ICICI', 'PERUNGUDI');
INSERT INTO BANK_INFO(IFSC_CODE, BANK_NAME, BRANCH_NAME)VALUES('SBISD0113', 'SBI', 'SAIDAPET');
select*from bank_info;

-- CUSTOMER_PERSONAL_INFO
INSERT INTO CUSTOMER_PERSONAL_INFO(CUSTOMER_ID, CUSTOMER_NAME, DATE_OF_BIRTH, GUARDIAN_NAME, ADDRESS, CONTACT_NUMBER, MAIL_ID, GENDER)VALUES('C-001', 'PRIYANKA PATHAK', '1975-07-19','RAMESH PATHAK', '65,MG ROAD, DELHI', '9659863229', 'priyankap19@gmail.com', 'F');
INSERT INTO CUSTOMER_PERSONAL_INFO(CUSTOMER_ID, CUSTOMER_NAME, DATE_OF_BIRTH, GUARDIAN_NAME, ADDRESS, CONTACT_NUMBER, MAIL_ID, GENDER)VALUES('C-012', 'SAPNA SHINDE', '1970-11-01','SUMIT KUMAR SHINDE', '023,SHIVAJI MARG ROAD, MUMBAI,MAHARASHTRA', '9649853286', 'shinde.sapna1970@gmail.com', 'F');
INSERT INTO CUSTOMER_PERSONAL_INFO(CUSTOMER_ID, CUSTOMER_NAME, DATE_OF_BIRTH, GUARDIAN_NAME, ADDRESS, CONTACT_NUMBER, MAIL_ID, GENDER)VALUES('C-093', 'AMIT KUMAR', '1990-05-23','REETA KUMAR', '15,MG ROAD,AGRA, UTTAR PRADESH', '9036586452', 'amitkumar659@gmail.com', 'M');
INSERT INTO CUSTOMER_PERSONAL_INFO(CUSTOMER_ID, CUSTOMER_NAME, DATE_OF_BIRTH, GUARDIAN_NAME, ADDRESS, CONTACT_NUMBER, MAIL_ID, GENDER)VALUES('C-084', 'HARPREET KAUR BAJWA', '1985-06-03','RAJINDER SINGH BAJWA', 'T-014, GALAXY APARTMENT, AMRITSAR, PUNJAB', '9853261470', 'harpreetkaur.bajwa63@gmail.com', 'F');
INSERT INTO CUSTOMER_PERSONAL_INFO(CUSTOMER_ID, CUSTOMER_NAME, DATE_OF_BIRTH, GUARDIAN_NAME, ADDRESS, CONTACT_NUMBER, MAIL_ID, GENDER)VALUES('C-065', 'NAYANTHARA RAMASUNDARAM', '1996-12-09','SRIBALASUBRAMANIAM', '1/69,CHENNAI, TAMIL NADU', '8695220473', 'nayanthara1996@gmail.com', 'F');
select * from customer_personal_info;


-- CUSTOMER_REFERENCE_INFO
INSERT INTO CUSTOMER_REFERENCE_INFO(CUSTOMER_ID, REFERENCE_ACC_NAME, REFERENCE_ACC_NUMBER, REFERENCE_ACC_ADDRESS, RELATION)VALUES('C-001', 'RAMESH PATHAK', '018502635469', 'DELHI', 'FATHER');
INSERT INTO CUSTOMER_REFERENCE_INFO(CUSTOMER_ID, REFERENCE_ACC_NAME, REFERENCE_ACC_NUMBER, REFERENCE_ACC_ADDRESS, RELATION)VALUES('C-012', 'SUMIT KUMAR SHINDE', '012635940185', 'MAHARASHTRA', 'HUSBAND');
INSERT INTO CUSTOMER_REFERENCE_INFO(CUSTOMER_ID, REFERENCE_ACC_NAME, REFERENCE_ACC_NUMBER, REFERENCE_ACC_ADDRESS, RELATION)VALUES('C-093', 'REETA KUMAR', '019650284130', 'UTTAR PRADESH', 'MOTHER');
INSERT INTO CUSTOMER_REFERENCE_INFO(CUSTOMER_ID, REFERENCE_ACC_NAME, REFERENCE_ACC_NUMBER, REFERENCE_ACC_ADDRESS, RELATION)VALUES('C-084', 'RAJINDER SINGH BAJWA', '018550697420', 'PUNJAB', 'FATHER');
INSERT INTO CUSTOMER_REFERENCE_INFO(CUSTOMER_ID, REFERENCE_ACC_NAME, REFERENCE_ACC_NUMBER, REFERENCE_ACC_ADDRESS, RELATION)VALUES('C-065', 'SRIBALASUBRAMANIAM', '018263622716', 'TAMIL NADU', 'FATHER');
select * from customer_reference_info;

-- ACCOUNT_INFO
INSERT INTO ACCOUNT_INFO(ACCOUNT_NUMBER, CUSTOMER_ID, ACCOUNT_TYPE, REGISTERATION_DATE, IFSC_CODE)VALUES('018502635469', 'C-001', 'SAVING', '2005-05-06', 'HDVL0012');
INSERT INTO ACCOUNT_INFO(ACCOUNT_NUMBER, CUSTOMER_ID, ACCOUNT_TYPE, REGISTERATION_DATE, IFSC_CODE)VALUES('012635940185', 'C-012', 'HOME LOAN', '2012-12-16', 'SBITN0123');
INSERT INTO ACCOUNT_INFO(ACCOUNT_NUMBER, CUSTOMER_ID, ACCOUNT_TYPE, REGISTERATION_DATE, IFSC_CODE)VALUES('019650284130', 'C-093', 'SAVING', '2014-04-23', 'ICITN0232');
INSERT INTO ACCOUNT_INFO(ACCOUNT_NUMBER, CUSTOMER_ID, ACCOUNT_TYPE, REGISTERATION_DATE, IFSC_CODE)VALUES('018550697420', 'C-084', 'FD', '2009-01-29', 'ICIPG0242');
INSERT INTO ACCOUNT_INFO(ACCOUNT_NUMBER, CUSTOMER_ID, ACCOUNT_TYPE, REGISTERATION_DATE, IFSC_CODE)VALUES('018263622716', 'C-065', 'SAVING', '2018-08-11', 'SBISD0113');

select * from ACCOUNT_INFO;

#To get data about the number of females using bank account
select * from customer_personal_info where gender='F';

#To retreive the data of all the users who have savings bank account
select * from account_info where ACCOUNT_TYPE='saving';

#To retreive data from customer reference info
select CUSTOMER_ID, REFERENCE_ACC_NAME, REFERENCE_ACC_NUMBER, REFERENCE_ACC_ADDRESS from customer_reference_info ORDER BY 'cutomer_id';

# To retreive data of all the bank users
select CUSTOMER_ID, ACCOUNT_TYPE, REGISTERATION_DATE, IFSC_CODE from account_info;

#To select all the users born before 1980
select customer_name from customer_personal_info where date_of_birth not like'%1985%';

#To select customers with registeration date before 2010
select * from account_info where REGISTERATION_DATE<'2010-01-01';
